"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/costs/analysis";
exports.ids = ["pages/api/costs/analysis"];
exports.modules = {

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/azure-ad":
/*!***********************************************!*\
  !*** external "next-auth/providers/azure-ad" ***!
  \***********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/azure-ad");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcosts%2Fanalysis&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccosts%5Canalysis.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcosts%2Fanalysis&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccosts%5Canalysis.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_costs_analysis_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\costs\\analysis.js */ \"(api)/./pages/api/costs/analysis.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_costs_analysis_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_costs_analysis_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/costs/analysis\",\n        pathname: \"/api/costs/analysis\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_costs_analysis_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNvc3RzJTJGYW5hbHlzaXMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2Nvc3RzJTVDYW5hbHlzaXMuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNkQ7QUFDN0Q7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHlEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx5REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9henVyZS1haS1pbmZyYS1hc3Npc3RhbnQvPzBhMDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxjb3N0c1xcXFxhbmFseXNpcy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2Nvc3RzL2FuYWx5c2lzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY29zdHMvYW5hbHlzaXNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcosts%2Fanalysis&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccosts%5Canalysis.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].js":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/azure-ad */ \"next-auth/providers/azure-ad\");\n/* harmony import */ var next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst authOptions = {\n    providers: [\n        next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: \"0f999aae-eb3e-4f05-9c23-9e6f325de992\",\n            clientSecret: process.env.AZURE_CLIENT_SECRET,\n            tenantId: \"70f34dd7-eb03-4e2c-b3aa-619eaa59f526\",\n            authorization: {\n                params: {\n                    scope: \"openid profile email offline_access https://management.azure.com/user_impersonation\"\n                }\n            }\n        })\n    ],\n    callbacks: {\n        async jwt ({ token, account }) {\n            if (account) {\n                token.accessToken = account.access_token;\n                token.refreshToken = account.refresh_token;\n                try {\n                    // Get subscription info from Azure Management API\n                    const response = await fetch(\"https://management.azure.com/subscriptions?api-version=2020-01-01\", {\n                        headers: {\n                            Authorization: `Bearer ${account.access_token}`\n                        }\n                    });\n                    const data = await response.json();\n                    console.log(\"Azure API Response:\", data);\n                    if (data.error) {\n                        console.error(\"Azure API Error:\", data.error);\n                        throw new Error(data.error.message);\n                    }\n                    if (data.value && data.value.length > 0) {\n                        token.subscriptionId = data.value[0].subscriptionId;\n                        token.tenantId = data.value[0].tenantId;\n                    } else {\n                        console.error(\"No subscriptions found\");\n                    }\n                } catch (error) {\n                    console.error(\"Error fetching subscription:\", error);\n                }\n            }\n            console.log(\"JWT Token:\", token);\n            return token;\n        },\n        async session ({ session, token }) {\n            // Store only essential data\n            session.accessToken = token.accessToken;\n            session.subscriptionId = token.subscriptionId;\n            session.tenantId = token.tenantId;\n            session.user = {\n                name: token.name,\n                email: token.email\n            };\n            // Don't store refresh token in session\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/error\"\n    },\n    debug: \"development\" === \"development\"\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFnQztBQUMwQjtBQUVuRCxNQUFNRSxjQUFjO0lBQ3pCQyxXQUFXO1FBQ1RGLG1FQUFlQSxDQUFDO1lBQ2RHLFVBQVVDLHNDQUF1QztZQUNqREcsY0FBY0gsUUFBUUMsR0FBRyxDQUFDRyxtQkFBbUI7WUFDN0NDLFVBQVVMLHNDQUF1QztZQUNqRE8sZUFBZTtnQkFDYkMsUUFBUTtvQkFDTkMsT0FBTztnQkFDVDtZQUNGO1FBQ0Y7S0FDRDtJQUNEQyxXQUFXO1FBQ1QsTUFBTUMsS0FBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRTtZQUMxQixJQUFJQSxTQUFTO2dCQUNYRCxNQUFNRSxXQUFXLEdBQUdELFFBQVFFLFlBQVk7Z0JBQ3hDSCxNQUFNSSxZQUFZLEdBQUdILFFBQVFJLGFBQWE7Z0JBQzFDLElBQUk7b0JBQ0Ysa0RBQWtEO29CQUNsRCxNQUFNQyxXQUFXLE1BQU1DLE1BQU0scUVBQXFFO3dCQUNoR0MsU0FBUzs0QkFDUEMsZUFBZSxDQUFDLE9BQU8sRUFBRVIsUUFBUUUsWUFBWSxDQUFDLENBQUM7d0JBQ2pEO29CQUNGO29CQUNBLE1BQU1PLE9BQU8sTUFBTUosU0FBU0ssSUFBSTtvQkFDaENDLFFBQVFDLEdBQUcsQ0FBQyx1QkFBdUJIO29CQUVuQyxJQUFJQSxLQUFLSSxLQUFLLEVBQUU7d0JBQ2RGLFFBQVFFLEtBQUssQ0FBQyxvQkFBb0JKLEtBQUtJLEtBQUs7d0JBQzVDLE1BQU0sSUFBSUMsTUFBTUwsS0FBS0ksS0FBSyxDQUFDRSxPQUFPO29CQUNwQztvQkFFQSxJQUFJTixLQUFLTyxLQUFLLElBQUlQLEtBQUtPLEtBQUssQ0FBQ0MsTUFBTSxHQUFHLEdBQUc7d0JBQ3ZDbEIsTUFBTW1CLGNBQWMsR0FBR1QsS0FBS08sS0FBSyxDQUFDLEVBQUUsQ0FBQ0UsY0FBYzt3QkFDbkRuQixNQUFNUCxRQUFRLEdBQUdpQixLQUFLTyxLQUFLLENBQUMsRUFBRSxDQUFDeEIsUUFBUTtvQkFDekMsT0FBTzt3QkFDTG1CLFFBQVFFLEtBQUssQ0FBQztvQkFDaEI7Z0JBQ0YsRUFBRSxPQUFPQSxPQUFPO29CQUNkRixRQUFRRSxLQUFLLENBQUMsZ0NBQWdDQTtnQkFDaEQ7WUFDRjtZQUNBRixRQUFRQyxHQUFHLENBQUMsY0FBY2I7WUFDMUIsT0FBT0E7UUFDVDtRQUNBLE1BQU1vQixTQUFRLEVBQUVBLE9BQU8sRUFBRXBCLEtBQUssRUFBRTtZQUM5Qiw0QkFBNEI7WUFDNUJvQixRQUFRbEIsV0FBVyxHQUFHRixNQUFNRSxXQUFXO1lBQ3ZDa0IsUUFBUUQsY0FBYyxHQUFHbkIsTUFBTW1CLGNBQWM7WUFDN0NDLFFBQVEzQixRQUFRLEdBQUdPLE1BQU1QLFFBQVE7WUFDakMyQixRQUFRQyxJQUFJLEdBQUc7Z0JBQ2JDLE1BQU10QixNQUFNc0IsSUFBSTtnQkFDaEJDLE9BQU92QixNQUFNdUIsS0FBSztZQUNwQjtZQUNBLHVDQUF1QztZQUN2QyxPQUFPSDtRQUNUO0lBQ0Y7SUFDQUksT0FBTztRQUNMQyxRQUFRO1FBQ1JYLE9BQU87SUFDVDtJQUNBWSxPQUFPdEMsa0JBQXlCO0FBQ2xDLEVBQUM7QUFFRCxpRUFBZUwsZ0RBQVFBLENBQUNFLFlBQVlBLEVBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9henVyZS1haS1pbmZyYS1hc3Npc3RhbnQvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLmpzPzUyN2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5leHRBdXRoIGZyb20gJ25leHQtYXV0aCdcclxuaW1wb3J0IEF6dXJlQURQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2F6dXJlLWFkJ1xyXG5cclxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zID0ge1xyXG4gIHByb3ZpZGVyczogW1xyXG4gICAgQXp1cmVBRFByb3ZpZGVyKHtcclxuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FaVVJFX0NMSUVOVF9JRCxcclxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5BWlVSRV9DTElFTlRfU0VDUkVULFxyXG4gICAgICB0ZW5hbnRJZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVpVUkVfVEVOQU5UX0lELFxyXG4gICAgICBhdXRob3JpemF0aW9uOiB7XHJcbiAgICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgICBzY29wZTogJ29wZW5pZCBwcm9maWxlIGVtYWlsIG9mZmxpbmVfYWNjZXNzIGh0dHBzOi8vbWFuYWdlbWVudC5henVyZS5jb20vdXNlcl9pbXBlcnNvbmF0aW9uJ1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSlcclxuICBdLFxyXG4gIGNhbGxiYWNrczoge1xyXG4gICAgYXN5bmMgand0KHsgdG9rZW4sIGFjY291bnQgfSkge1xyXG4gICAgICBpZiAoYWNjb3VudCkge1xyXG4gICAgICAgIHRva2VuLmFjY2Vzc1Rva2VuID0gYWNjb3VudC5hY2Nlc3NfdG9rZW5cclxuICAgICAgICB0b2tlbi5yZWZyZXNoVG9rZW4gPSBhY2NvdW50LnJlZnJlc2hfdG9rZW5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgLy8gR2V0IHN1YnNjcmlwdGlvbiBpbmZvIGZyb20gQXp1cmUgTWFuYWdlbWVudCBBUElcclxuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vbWFuYWdlbWVudC5henVyZS5jb20vc3Vic2NyaXB0aW9ucz9hcGktdmVyc2lvbj0yMDIwLTAxLTAxJywge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY291bnQuYWNjZXNzX3Rva2VufWBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdBenVyZSBBUEkgUmVzcG9uc2U6JywgZGF0YSlcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGRhdGEuZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQXp1cmUgQVBJIEVycm9yOicsIGRhdGEuZXJyb3IpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkYXRhLmVycm9yLm1lc3NhZ2UpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChkYXRhLnZhbHVlICYmIGRhdGEudmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0b2tlbi5zdWJzY3JpcHRpb25JZCA9IGRhdGEudmFsdWVbMF0uc3Vic2NyaXB0aW9uSWRcclxuICAgICAgICAgICAgdG9rZW4udGVuYW50SWQgPSBkYXRhLnZhbHVlWzBdLnRlbmFudElkXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyBzdWJzY3JpcHRpb25zIGZvdW5kJylcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgc3Vic2NyaXB0aW9uOicsIGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBjb25zb2xlLmxvZygnSldUIFRva2VuOicsIHRva2VuKVxyXG4gICAgICByZXR1cm4gdG9rZW5cclxuICAgIH0sXHJcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiwgdG9rZW4gfSkge1xyXG4gICAgICAvLyBTdG9yZSBvbmx5IGVzc2VudGlhbCBkYXRhXHJcbiAgICAgIHNlc3Npb24uYWNjZXNzVG9rZW4gPSB0b2tlbi5hY2Nlc3NUb2tlblxyXG4gICAgICBzZXNzaW9uLnN1YnNjcmlwdGlvbklkID0gdG9rZW4uc3Vic2NyaXB0aW9uSWRcclxuICAgICAgc2Vzc2lvbi50ZW5hbnRJZCA9IHRva2VuLnRlbmFudElkXHJcbiAgICAgIHNlc3Npb24udXNlciA9IHtcclxuICAgICAgICBuYW1lOiB0b2tlbi5uYW1lLFxyXG4gICAgICAgIGVtYWlsOiB0b2tlbi5lbWFpbFxyXG4gICAgICB9XHJcbiAgICAgIC8vIERvbid0IHN0b3JlIHJlZnJlc2ggdG9rZW4gaW4gc2Vzc2lvblxyXG4gICAgICByZXR1cm4gc2Vzc2lvblxyXG4gICAgfVxyXG4gIH0sXHJcbiAgcGFnZXM6IHtcclxuICAgIHNpZ25JbjogJy9hdXRoL3NpZ25pbicsXHJcbiAgICBlcnJvcjogJy9hdXRoL2Vycm9yJyxcclxuICB9LFxyXG4gIGRlYnVnOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50J1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBOZXh0QXV0aChhdXRoT3B0aW9ucykgIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiQXp1cmVBRFByb3ZpZGVyIiwiYXV0aE9wdGlvbnMiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BWlVSRV9DTElFTlRfSUQiLCJjbGllbnRTZWNyZXQiLCJBWlVSRV9DTElFTlRfU0VDUkVUIiwidGVuYW50SWQiLCJORVhUX1BVQkxJQ19BWlVSRV9URU5BTlRfSUQiLCJhdXRob3JpemF0aW9uIiwicGFyYW1zIiwic2NvcGUiLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsImFjY291bnQiLCJhY2Nlc3NUb2tlbiIsImFjY2Vzc190b2tlbiIsInJlZnJlc2hUb2tlbiIsInJlZnJlc2hfdG9rZW4iLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJkYXRhIiwianNvbiIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciIsIkVycm9yIiwibWVzc2FnZSIsInZhbHVlIiwibGVuZ3RoIiwic3Vic2NyaXB0aW9uSWQiLCJzZXNzaW9uIiwidXNlciIsIm5hbWUiLCJlbWFpbCIsInBhZ2VzIiwic2lnbkluIiwiZGVidWciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].js\n");

/***/ }),

/***/ "(api)/./pages/api/costs/analysis.js":
/*!*************************************!*\
  !*** ./pages/api/costs/analysis.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth/[...nextauth] */ \"(api)/./pages/api/auth/[...nextauth].js\");\n\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        const session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__.authOptions);\n        if (!session) {\n            return res.status(401).json({\n                message: \"Unauthorized\"\n            });\n        }\n        const { accessToken, subscriptionId } = session;\n        if (!subscriptionId) {\n            return res.status(400).json({\n                message: \"No subscription ID found in session. Please ensure you have access to an Azure subscription.\"\n            });\n        }\n        // Get current date and start of month\n        const endDate = new Date();\n        const startDate = new Date(endDate.getFullYear(), endDate.getMonth(), 1);\n        // Get usage details directly from Azure Management API\n        const usageDetails = [];\n        try {\n            const url = `https://management.azure.com/subscriptions/${subscriptionId}/providers/Microsoft.CostManagement/query?api-version=2021-10-01`;\n            console.log(\"Calling Azure API:\", url);\n            const response = await fetch(url, {\n                method: \"POST\",\n                headers: {\n                    Authorization: `Bearer ${accessToken}`,\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    type: \"ActualCost\",\n                    timeframe: \"Custom\",\n                    timePeriod: {\n                        from: startDate.toISOString(),\n                        to: endDate.toISOString()\n                    },\n                    dataSet: {\n                        granularity: \"Daily\",\n                        aggregation: {\n                            totalCost: {\n                                name: \"Cost\",\n                                function: \"Sum\"\n                            }\n                        },\n                        grouping: [\n                            {\n                                type: \"Dimension\",\n                                name: \"ResourceGroupName\"\n                            },\n                            {\n                                type: \"Dimension\",\n                                name: \"ResourceType\"\n                            }\n                        ]\n                    }\n                })\n            });\n            console.log(\"Response status:\", response.status);\n            const responseText = await response.text();\n            console.log(\"Response body:\", responseText);\n            if (!response.ok) {\n                throw new Error(`API Error: ${response.status} - ${responseText}`);\n            }\n            const data = JSON.parse(responseText);\n            console.log(\"Columns:\", JSON.stringify(data.properties.columns, null, 2));\n            console.log(\"Rows:\", JSON.stringify(data.properties.rows, null, 2));\n            // Transform cost management data into our format\n            for (const row of data.properties?.rows || []){\n                console.log(\"Processing row:\", row);\n                const [cost, dateNum, resourceGroup, resourceType, currency] = row;\n                // Parse YYYYMMDD format\n                const year = Math.floor(dateNum / 10000);\n                const month = Math.floor(dateNum % 10000 / 100) - 1 // JS months are 0-based\n                ;\n                const day = dateNum % 100;\n                const date = new Date(year, month, day);\n                const item = {\n                    date: date.toISOString(),\n                    resourceGroup: resourceGroup || \"Unassigned\",\n                    resourceType: resourceType || \"Other\",\n                    cost: Number(cost) || 0,\n                    currency: currency || \"USD\"\n                };\n                console.log(\"Transformed item:\", item);\n                usageDetails.push(item);\n            }\n            console.log(\"Total items:\", usageDetails.length);\n        } catch (error) {\n            console.error(\"Error fetching usage details:\", error);\n            console.error(\"Access Token:\", accessToken);\n            throw error;\n        }\n        // Calculate totals and daily averages\n        const total = usageDetails.reduce((sum, item)=>sum + (Number(item.cost) || 0), 0);\n        const dailyAverage = total / ((endDate - startDate) / (1000 * 60 * 60 * 24));\n        // Group by resource group\n        const costByResourceGroup = usageDetails.reduce((acc, item)=>{\n            const rg = item.resourceGroup || \"Unassigned\";\n            acc[rg] = (acc[rg] || 0) + (Number(item.cost) || 0);\n            return acc;\n        }, {});\n        // Group by resource type\n        const costByServiceType = usageDetails.reduce((acc, item)=>{\n            const type = item.resourceType || \"Other\";\n            acc[type] = (acc[type] || 0) + (Number(item.cost) || 0);\n            return acc;\n        }, {});\n        // Calculate forecast based on daily average\n        const daysInMonth = new Date(endDate.getFullYear(), endDate.getMonth() + 1, 0).getDate();\n        const forecastTotal = dailyAverage * daysInMonth;\n        return res.status(200).json({\n            total: total.toFixed(2),\n            dailyAverage: dailyAverage.toFixed(2),\n            forecastTotal: forecastTotal.toFixed(2),\n            currency: usageDetails[0]?.currency || \"USD\",\n            costByResourceGroup,\n            costByServiceType,\n            startDate: startDate.toISOString(),\n            endDate: endDate.toISOString(),\n            usageDetails: usageDetails.slice(0, 100) // Limit to last 100 entries\n        });\n    } catch (error) {\n        console.error(\"Error fetching cost data:\", error);\n        return res.status(500).json({\n            message: \"Failed to fetch cost data\",\n            error: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY29zdHMvYW5hbHlzaXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpRDtBQUNFO0FBRXBDLGVBQWVFLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssT0FBTztRQUN4QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBcUI7SUFDOUQ7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsVUFBVSxNQUFNVCxnRUFBZ0JBLENBQUNHLEtBQUtDLEtBQUtILHdEQUFXQTtRQUM1RCxJQUFJLENBQUNRLFNBQVM7WUFDWixPQUFPTCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxTQUFTO1lBQWU7UUFDeEQ7UUFFQSxNQUFNLEVBQUVFLFdBQVcsRUFBRUMsY0FBYyxFQUFFLEdBQUdGO1FBRXhDLElBQUksQ0FBQ0UsZ0JBQWdCO1lBQ25CLE9BQU9QLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxTQUFTO1lBQ1g7UUFDRjtRQUVBLHNDQUFzQztRQUN0QyxNQUFNSSxVQUFVLElBQUlDO1FBQ3BCLE1BQU1DLFlBQVksSUFBSUQsS0FBS0QsUUFBUUcsV0FBVyxJQUFJSCxRQUFRSSxRQUFRLElBQUk7UUFFdEUsdURBQXVEO1FBQ3ZELE1BQU1DLGVBQWUsRUFBRTtRQUN2QixJQUFJO1lBQ0YsTUFBTUMsTUFBTSxDQUFDLDJDQUEyQyxFQUFFUCxlQUFlLGdFQUFnRSxDQUFDO1lBQzFJUSxRQUFRQyxHQUFHLENBQUMsc0JBQXNCRjtZQUVsQyxNQUFNRyxXQUFXLE1BQU1DLE1BQU1KLEtBQUs7Z0JBQ2hDYixRQUFRO2dCQUNSa0IsU0FBUztvQkFDUEMsZUFBZSxDQUFDLE9BQU8sRUFBRWQsWUFBWSxDQUFDO29CQUN0QyxnQkFBZ0I7Z0JBQ2xCO2dCQUNBZSxNQUFNQyxLQUFLQyxTQUFTLENBQUM7b0JBQ25CQyxNQUFNO29CQUNOQyxXQUFXO29CQUNYQyxZQUFZO3dCQUNWQyxNQUFNakIsVUFBVWtCLFdBQVc7d0JBQzNCQyxJQUFJckIsUUFBUW9CLFdBQVc7b0JBQ3pCO29CQUNBRSxTQUFTO3dCQUNQQyxhQUFhO3dCQUNiQyxhQUFhOzRCQUNYQyxXQUFXO2dDQUNUQyxNQUFNO2dDQUNOQyxVQUFVOzRCQUNaO3dCQUNGO3dCQUNBQyxVQUFVOzRCQUNSO2dDQUNFWixNQUFNO2dDQUNOVSxNQUFNOzRCQUNSOzRCQUNBO2dDQUNFVixNQUFNO2dDQUNOVSxNQUFNOzRCQUNSO3lCQUNEO29CQUNIO2dCQUNGO1lBQ0Y7WUFFQW5CLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0JDLFNBQVNmLE1BQU07WUFDL0MsTUFBTW1DLGVBQWUsTUFBTXBCLFNBQVNxQixJQUFJO1lBQ3hDdkIsUUFBUUMsR0FBRyxDQUFDLGtCQUFrQnFCO1lBRTlCLElBQUksQ0FBQ3BCLFNBQVNzQixFQUFFLEVBQUU7Z0JBQ2hCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLFdBQVcsRUFBRXZCLFNBQVNmLE1BQU0sQ0FBQyxHQUFHLEVBQUVtQyxhQUFhLENBQUM7WUFDbkU7WUFFQSxNQUFNSSxPQUFPbkIsS0FBS29CLEtBQUssQ0FBQ0w7WUFDeEJ0QixRQUFRQyxHQUFHLENBQUMsWUFBWU0sS0FBS0MsU0FBUyxDQUFDa0IsS0FBS0UsVUFBVSxDQUFDQyxPQUFPLEVBQUUsTUFBTTtZQUN0RTdCLFFBQVFDLEdBQUcsQ0FBQyxTQUFTTSxLQUFLQyxTQUFTLENBQUNrQixLQUFLRSxVQUFVLENBQUNFLElBQUksRUFBRSxNQUFNO1lBRWhFLGlEQUFpRDtZQUNqRCxLQUFLLE1BQU1DLE9BQU9MLEtBQUtFLFVBQVUsRUFBRUUsUUFBUSxFQUFFLENBQUU7Z0JBQzdDOUIsUUFBUUMsR0FBRyxDQUFDLG1CQUFtQjhCO2dCQUMvQixNQUFNLENBQUNDLE1BQU1DLFNBQVNDLGVBQWVDLGNBQWNDLFNBQVMsR0FBR0w7Z0JBRS9ELHdCQUF3QjtnQkFDeEIsTUFBTU0sT0FBT0MsS0FBS0MsS0FBSyxDQUFDTixVQUFVO2dCQUNsQyxNQUFNTyxRQUFRRixLQUFLQyxLQUFLLENBQUMsVUFBVyxRQUFTLE9BQU8sRUFBRSx3QkFBd0I7O2dCQUM5RSxNQUFNRSxNQUFNUixVQUFVO2dCQUN0QixNQUFNUyxPQUFPLElBQUloRCxLQUFLMkMsTUFBTUcsT0FBT0M7Z0JBRW5DLE1BQU1FLE9BQU87b0JBQ1hELE1BQU1BLEtBQUs3QixXQUFXO29CQUN0QnFCLGVBQWVBLGlCQUFpQjtvQkFDaENDLGNBQWNBLGdCQUFnQjtvQkFDOUJILE1BQU1ZLE9BQU9aLFNBQVM7b0JBQ3RCSSxVQUFVQSxZQUFZO2dCQUN4QjtnQkFDQXBDLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUIwQztnQkFDakM3QyxhQUFhK0MsSUFBSSxDQUFDRjtZQUNwQjtZQUVBM0MsUUFBUUMsR0FBRyxDQUFDLGdCQUFnQkgsYUFBYWdELE1BQU07UUFDakQsRUFBRSxPQUFPQyxPQUFPO1lBQ2QvQyxRQUFRK0MsS0FBSyxDQUFDLGlDQUFpQ0E7WUFDL0MvQyxRQUFRK0MsS0FBSyxDQUFDLGlCQUFpQnhEO1lBQy9CLE1BQU13RDtRQUNSO1FBRUEsc0NBQXNDO1FBQ3RDLE1BQU1DLFFBQVFsRCxhQUFhbUQsTUFBTSxDQUFDLENBQUNDLEtBQUtQLE9BQVNPLE1BQU9OLENBQUFBLE9BQU9ELEtBQUtYLElBQUksS0FBSyxJQUFJO1FBQ2pGLE1BQU1tQixlQUFlSCxRQUFTLEVBQUN2RCxVQUFVRSxTQUFRLElBQU0sUUFBTyxLQUFLLEtBQUssRUFBQyxDQUFDO1FBRTFFLDBCQUEwQjtRQUMxQixNQUFNeUQsc0JBQXNCdEQsYUFBYW1ELE1BQU0sQ0FBQyxDQUFDSSxLQUFLVjtZQUNwRCxNQUFNVyxLQUFLWCxLQUFLVCxhQUFhLElBQUk7WUFDakNtQixHQUFHLENBQUNDLEdBQUcsR0FBRyxDQUFDRCxHQUFHLENBQUNDLEdBQUcsSUFBSSxLQUFNVixDQUFBQSxPQUFPRCxLQUFLWCxJQUFJLEtBQUs7WUFDakQsT0FBT3FCO1FBQ1QsR0FBRyxDQUFDO1FBRUoseUJBQXlCO1FBQ3pCLE1BQU1FLG9CQUFvQnpELGFBQWFtRCxNQUFNLENBQUMsQ0FBQ0ksS0FBS1Y7WUFDbEQsTUFBTWxDLE9BQU9rQyxLQUFLUixZQUFZLElBQUk7WUFDbENrQixHQUFHLENBQUM1QyxLQUFLLEdBQUcsQ0FBQzRDLEdBQUcsQ0FBQzVDLEtBQUssSUFBSSxLQUFNbUMsQ0FBQUEsT0FBT0QsS0FBS1gsSUFBSSxLQUFLO1lBQ3JELE9BQU9xQjtRQUNULEdBQUcsQ0FBQztRQUVKLDRDQUE0QztRQUM1QyxNQUFNRyxjQUFjLElBQUk5RCxLQUFLRCxRQUFRRyxXQUFXLElBQUlILFFBQVFJLFFBQVEsS0FBSyxHQUFHLEdBQUc0RCxPQUFPO1FBQ3RGLE1BQU1DLGdCQUFnQlAsZUFBZUs7UUFFckMsT0FBT3ZFLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUI0RCxPQUFPQSxNQUFNVyxPQUFPLENBQUM7WUFDckJSLGNBQWNBLGFBQWFRLE9BQU8sQ0FBQztZQUNuQ0QsZUFBZUEsY0FBY0MsT0FBTyxDQUFDO1lBQ3JDdkIsVUFBVXRDLFlBQVksQ0FBQyxFQUFFLEVBQUVzQyxZQUFZO1lBQ3ZDZ0I7WUFDQUc7WUFDQTVELFdBQVdBLFVBQVVrQixXQUFXO1lBQ2hDcEIsU0FBU0EsUUFBUW9CLFdBQVc7WUFDNUJmLGNBQWNBLGFBQWE4RCxLQUFLLENBQUMsR0FBRyxLQUFLLDRCQUE0QjtRQUN2RTtJQUVGLEVBQUUsT0FBT2IsT0FBTztRQUNkL0MsUUFBUStDLEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU85RCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1QwRCxPQUFPQSxNQUFNMUQsT0FBTztRQUN0QjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9henVyZS1haS1pbmZyYS1hc3Npc3RhbnQvLi9wYWdlcy9hcGkvY29zdHMvYW5hbHlzaXMuanM/NWI2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aC9uZXh0XCJcclxuaW1wb3J0IHsgYXV0aE9wdGlvbnMgfSBmcm9tIFwiLi4vYXV0aC9bLi4ubmV4dGF1dGhdXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pXHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMsIGF1dGhPcHRpb25zKVxyXG4gICAgaWYgKCFzZXNzaW9uKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgeyBhY2Nlc3NUb2tlbiwgc3Vic2NyaXB0aW9uSWQgfSA9IHNlc3Npb25cclxuICAgIFxyXG4gICAgaWYgKCFzdWJzY3JpcHRpb25JZCkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcclxuICAgICAgICBtZXNzYWdlOiAnTm8gc3Vic2NyaXB0aW9uIElEIGZvdW5kIGluIHNlc3Npb24uIFBsZWFzZSBlbnN1cmUgeW91IGhhdmUgYWNjZXNzIHRvIGFuIEF6dXJlIHN1YnNjcmlwdGlvbi4nXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2V0IGN1cnJlbnQgZGF0ZSBhbmQgc3RhcnQgb2YgbW9udGhcclxuICAgIGNvbnN0IGVuZERhdGUgPSBuZXcgRGF0ZSgpXHJcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShlbmREYXRlLmdldEZ1bGxZZWFyKCksIGVuZERhdGUuZ2V0TW9udGgoKSwgMSlcclxuXHJcbiAgICAvLyBHZXQgdXNhZ2UgZGV0YWlscyBkaXJlY3RseSBmcm9tIEF6dXJlIE1hbmFnZW1lbnQgQVBJXHJcbiAgICBjb25zdCB1c2FnZURldGFpbHMgPSBbXVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vbWFuYWdlbWVudC5henVyZS5jb20vc3Vic2NyaXB0aW9ucy8ke3N1YnNjcmlwdGlvbklkfS9wcm92aWRlcnMvTWljcm9zb2Z0LkNvc3RNYW5hZ2VtZW50L3F1ZXJ5P2FwaS12ZXJzaW9uPTIwMjEtMTAtMDFgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdDYWxsaW5nIEF6dXJlIEFQSTonLCB1cmwpXHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHthY2Nlc3NUb2tlbn1gLFxyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgdHlwZTogJ0FjdHVhbENvc3QnLFxyXG4gICAgICAgICAgdGltZWZyYW1lOiAnQ3VzdG9tJyxcclxuICAgICAgICAgIHRpbWVQZXJpb2Q6IHtcclxuICAgICAgICAgICAgZnJvbTogc3RhcnREYXRlLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgIHRvOiBlbmREYXRlLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBkYXRhU2V0OiB7XHJcbiAgICAgICAgICAgIGdyYW51bGFyaXR5OiAnRGFpbHknLFxyXG4gICAgICAgICAgICBhZ2dyZWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgIHRvdGFsQ29zdDoge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ0Nvc3QnLFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb246ICdTdW0nXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBncm91cGluZzogW1xyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdEaW1lbnNpb24nLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogJ1Jlc291cmNlR3JvdXBOYW1lJ1xyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ0RpbWVuc2lvbicsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAnUmVzb3VyY2VUeXBlJ1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnUmVzcG9uc2Ugc3RhdHVzOicsIHJlc3BvbnNlLnN0YXR1cylcclxuICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXHJcbiAgICAgIGNvbnNvbGUubG9nKCdSZXNwb25zZSBib2R5OicsIHJlc3BvbnNlVGV4dClcclxuXHJcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFQSSBFcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtyZXNwb25zZVRleHR9YClcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UocmVzcG9uc2VUZXh0KVxyXG4gICAgICBjb25zb2xlLmxvZygnQ29sdW1uczonLCBKU09OLnN0cmluZ2lmeShkYXRhLnByb3BlcnRpZXMuY29sdW1ucywgbnVsbCwgMikpXHJcbiAgICAgIGNvbnNvbGUubG9nKCdSb3dzOicsIEpTT04uc3RyaW5naWZ5KGRhdGEucHJvcGVydGllcy5yb3dzLCBudWxsLCAyKSlcclxuICAgICAgXHJcbiAgICAgIC8vIFRyYW5zZm9ybSBjb3N0IG1hbmFnZW1lbnQgZGF0YSBpbnRvIG91ciBmb3JtYXRcclxuICAgICAgZm9yIChjb25zdCByb3cgb2YgZGF0YS5wcm9wZXJ0aWVzPy5yb3dzIHx8IFtdKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3Npbmcgcm93OicsIHJvdylcclxuICAgICAgICBjb25zdCBbY29zdCwgZGF0ZU51bSwgcmVzb3VyY2VHcm91cCwgcmVzb3VyY2VUeXBlLCBjdXJyZW5jeV0gPSByb3dcclxuICAgICAgICBcclxuICAgICAgICAvLyBQYXJzZSBZWVlZTU1ERCBmb3JtYXRcclxuICAgICAgICBjb25zdCB5ZWFyID0gTWF0aC5mbG9vcihkYXRlTnVtIC8gMTAwMDApXHJcbiAgICAgICAgY29uc3QgbW9udGggPSBNYXRoLmZsb29yKChkYXRlTnVtICUgMTAwMDApIC8gMTAwKSAtIDEgLy8gSlMgbW9udGhzIGFyZSAwLWJhc2VkXHJcbiAgICAgICAgY29uc3QgZGF5ID0gZGF0ZU51bSAlIDEwMFxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgZGF5KVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSB7XHJcbiAgICAgICAgICBkYXRlOiBkYXRlLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICByZXNvdXJjZUdyb3VwOiByZXNvdXJjZUdyb3VwIHx8ICdVbmFzc2lnbmVkJyxcclxuICAgICAgICAgIHJlc291cmNlVHlwZTogcmVzb3VyY2VUeXBlIHx8ICdPdGhlcicsXHJcbiAgICAgICAgICBjb3N0OiBOdW1iZXIoY29zdCkgfHwgMCxcclxuICAgICAgICAgIGN1cnJlbmN5OiBjdXJyZW5jeSB8fCAnVVNEJ1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZygnVHJhbnNmb3JtZWQgaXRlbTonLCBpdGVtKVxyXG4gICAgICAgIHVzYWdlRGV0YWlscy5wdXNoKGl0ZW0pXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKCdUb3RhbCBpdGVtczonLCB1c2FnZURldGFpbHMubGVuZ3RoKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgdXNhZ2UgZGV0YWlsczonLCBlcnJvcilcclxuICAgICAgY29uc29sZS5lcnJvcignQWNjZXNzIFRva2VuOicsIGFjY2Vzc1Rva2VuKVxyXG4gICAgICB0aHJvdyBlcnJvclxyXG4gICAgfVxyXG5cclxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbHMgYW5kIGRhaWx5IGF2ZXJhZ2VzXHJcbiAgICBjb25zdCB0b3RhbCA9IHVzYWdlRGV0YWlscy5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgKE51bWJlcihpdGVtLmNvc3QpIHx8IDApLCAwKVxyXG4gICAgY29uc3QgZGFpbHlBdmVyYWdlID0gdG90YWwgLyAoKGVuZERhdGUgLSBzdGFydERhdGUpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKVxyXG5cclxuICAgIC8vIEdyb3VwIGJ5IHJlc291cmNlIGdyb3VwXHJcbiAgICBjb25zdCBjb3N0QnlSZXNvdXJjZUdyb3VwID0gdXNhZ2VEZXRhaWxzLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJnID0gaXRlbS5yZXNvdXJjZUdyb3VwIHx8ICdVbmFzc2lnbmVkJ1xyXG4gICAgICBhY2NbcmddID0gKGFjY1tyZ10gfHwgMCkgKyAoTnVtYmVyKGl0ZW0uY29zdCkgfHwgMClcclxuICAgICAgcmV0dXJuIGFjY1xyXG4gICAgfSwge30pXHJcblxyXG4gICAgLy8gR3JvdXAgYnkgcmVzb3VyY2UgdHlwZVxyXG4gICAgY29uc3QgY29zdEJ5U2VydmljZVR5cGUgPSB1c2FnZURldGFpbHMucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgdHlwZSA9IGl0ZW0ucmVzb3VyY2VUeXBlIHx8ICdPdGhlcidcclxuICAgICAgYWNjW3R5cGVdID0gKGFjY1t0eXBlXSB8fCAwKSArIChOdW1iZXIoaXRlbS5jb3N0KSB8fCAwKVxyXG4gICAgICByZXR1cm4gYWNjXHJcbiAgICB9LCB7fSlcclxuXHJcbiAgICAvLyBDYWxjdWxhdGUgZm9yZWNhc3QgYmFzZWQgb24gZGFpbHkgYXZlcmFnZVxyXG4gICAgY29uc3QgZGF5c0luTW9udGggPSBuZXcgRGF0ZShlbmREYXRlLmdldEZ1bGxZZWFyKCksIGVuZERhdGUuZ2V0TW9udGgoKSArIDEsIDApLmdldERhdGUoKVxyXG4gICAgY29uc3QgZm9yZWNhc3RUb3RhbCA9IGRhaWx5QXZlcmFnZSAqIGRheXNJbk1vbnRoXHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgdG90YWw6IHRvdGFsLnRvRml4ZWQoMiksXHJcbiAgICAgIGRhaWx5QXZlcmFnZTogZGFpbHlBdmVyYWdlLnRvRml4ZWQoMiksXHJcbiAgICAgIGZvcmVjYXN0VG90YWw6IGZvcmVjYXN0VG90YWwudG9GaXhlZCgyKSxcclxuICAgICAgY3VycmVuY3k6IHVzYWdlRGV0YWlsc1swXT8uY3VycmVuY3kgfHwgJ1VTRCcsXHJcbiAgICAgIGNvc3RCeVJlc291cmNlR3JvdXAsXHJcbiAgICAgIGNvc3RCeVNlcnZpY2VUeXBlLFxyXG4gICAgICBzdGFydERhdGU6IHN0YXJ0RGF0ZS50b0lTT1N0cmluZygpLFxyXG4gICAgICBlbmREYXRlOiBlbmREYXRlLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgIHVzYWdlRGV0YWlsczogdXNhZ2VEZXRhaWxzLnNsaWNlKDAsIDEwMCkgLy8gTGltaXQgdG8gbGFzdCAxMDAgZW50cmllc1xyXG4gICAgfSlcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNvc3QgZGF0YTonLCBlcnJvcilcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGZldGNoIGNvc3QgZGF0YScsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIFxyXG4gICAgfSlcclxuICB9XHJcbn0gIl0sIm5hbWVzIjpbImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsInNlc3Npb24iLCJhY2Nlc3NUb2tlbiIsInN1YnNjcmlwdGlvbklkIiwiZW5kRGF0ZSIsIkRhdGUiLCJzdGFydERhdGUiLCJnZXRGdWxsWWVhciIsImdldE1vbnRoIiwidXNhZ2VEZXRhaWxzIiwidXJsIiwiY29uc29sZSIsImxvZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidHlwZSIsInRpbWVmcmFtZSIsInRpbWVQZXJpb2QiLCJmcm9tIiwidG9JU09TdHJpbmciLCJ0byIsImRhdGFTZXQiLCJncmFudWxhcml0eSIsImFnZ3JlZ2F0aW9uIiwidG90YWxDb3N0IiwibmFtZSIsImZ1bmN0aW9uIiwiZ3JvdXBpbmciLCJyZXNwb25zZVRleHQiLCJ0ZXh0Iiwib2siLCJFcnJvciIsImRhdGEiLCJwYXJzZSIsInByb3BlcnRpZXMiLCJjb2x1bW5zIiwicm93cyIsInJvdyIsImNvc3QiLCJkYXRlTnVtIiwicmVzb3VyY2VHcm91cCIsInJlc291cmNlVHlwZSIsImN1cnJlbmN5IiwieWVhciIsIk1hdGgiLCJmbG9vciIsIm1vbnRoIiwiZGF5IiwiZGF0ZSIsIml0ZW0iLCJOdW1iZXIiLCJwdXNoIiwibGVuZ3RoIiwiZXJyb3IiLCJ0b3RhbCIsInJlZHVjZSIsInN1bSIsImRhaWx5QXZlcmFnZSIsImNvc3RCeVJlc291cmNlR3JvdXAiLCJhY2MiLCJyZyIsImNvc3RCeVNlcnZpY2VUeXBlIiwiZGF5c0luTW9udGgiLCJnZXREYXRlIiwiZm9yZWNhc3RUb3RhbCIsInRvRml4ZWQiLCJzbGljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/costs/analysis.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcosts%2Fanalysis&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccosts%5Canalysis.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();